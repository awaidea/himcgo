<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiMCGo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdui/1.0.2/css/mdui.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdui/1.0.2/js/mdui.min.js"></script>
</head>
<body class="mdui-theme-primary-indigo mdui-theme-accent-pink">
    <div class="mdui-container mdui-typo">
        <div class="mdui-row">
            <div class="mdui-col-md-12 mdui-text-center">
                <h1 class="mdui-typo-display-2">HiMCGo</h1>
            </div>
        </div>
        <div class="mdui-row">
            <div class="mdui-col-md-6 offset-md-3">
                <div class="mdui-textfield mdui-textfield-floating-label">
                    <label class="mdui-textfield-label">Minecraft 用户名</label>
                    <input type="text" id="username" class="mdui-textfield-input" placeholder="输入用户名">
                </div>
            </div>
        </div>
        <div class="mdui-row">
            <div class="mdui-col-md-6 offset-md-3 mdui-text-center">
                <button class="mdui-btn mdui-btn-raised mdui-color-theme" onclick="fetchData()">获取信息</button>
            </div>
        </div>
        <div class="mdui-row">
            <div class="mdui-col-md-6 offset-md-3">
                <div class="mdui-card mdui-m-y-2 result-container" style="display: none;">
                    <div class="mdui-card-content">
                        <h2>结果</h2>
                        <p id="skinUrl"></p>
                        <p id="uuid"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="mdui-dialog" id="loadingDialog">
        <div class="mdui-dialog-title">加载中...</div>
        <div class="mdui-dialog-content">
            <div class="mdui-spinner mdui-spinner-color-primary"></div>
        </div>
    </div>
    <script>
        // 显示加载对话框
        function showLoading() {
            const dialog = new mdui.Dialog('#loadingDialog');
            dialog.open();
        }
        // 隐藏加载对话框
        function hideLoading() {
            const dialog = new mdui.Dialog('#loadingDialog');
            dialog.close();
        }
        function fetchData() {
            const username = document.getElementById('username').value;
            if (username) {
                showLoading();
                const apiUrl = `https://api.mojang.com/users/profiles/minecraft/${username}`;
                fetch(apiUrl)
               .then(response => {
                        if (!response.ok) {
                            throw new Error('网络请求失败，状态码:'+ response.status);
                        }
                        return response.json();
                    })
               .then(data => {
                        if (data) {
                            const uuid = data.id;
                            const skinUrl = `https://crafatar.com/skins/${uuid}`;
                            document.getElementById('uuid').innerText = `UUID: ${uuid}`;
                            document.getElementById('skinUrl').innerText = `皮肤 URL: ${skinUrl}`;
                            document.querySelector('.result-container').style.display = 'block';
                        } else {
                            mdui.alert('未找到该用户信息');
                        }
                        hideLoading();
                    })
               .catch(error => {
                        console.error('获取数据时出错:', error);
                        mdui.alert('获取数据时出错，请稍后重试');
                        hideLoading();
                    });
            } else {
                mdui.alert('请输入用户名');
            }
        }
    </script>
</body>
</html>
